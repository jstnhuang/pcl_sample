# PCL sample
Sample usage of PCL with incoming PointCloud2 messages.

## Installation
1. Install PCL packages for ROS Hydro if you don't already have them:<br />
  `sudo apt-get install ros-hydro-pcl-conversions ros-hydro-pcl-ros ros-hydro-pcl-msgs`
2. Clone this repository:
```
cd ~/catkin_ws/src
git clone git@github.com:jstnhuang/pcl_sample.git
```

## Package creation and structure
This package was created with:<br />
`catkin_create_pkg pcl_sample pcl_conversions pcl_ros roscpp sensor_msgs`

This package is in C++. ROS packages typically put .h files in an include/packagename directory, while the .cpp files go in the src/ directory, like so:
```
pcl_sample/
pcl_sample/src/processor.cpp
pcl_sample/src/processor_node.cpp
pcl_sample/include/pcl_sample/processor.h
```

There are 3 categories of code we'll consider: libraries, executables, and tests.

A library is some piece of general code that doesn't have a main function. Executables are where the main function resides. All ROS nodes are executables. Tests are generally run against methods in libraries. Usually executables are simple enough, and delegate all their real work to library methods, so we don't usually write tests against executables. However, it's possible to start a ROS node in a unit test, and to send and receive messages to it. You can read more online about [unit testing in ROS](http://wiki.ros.org/UnitTesting).

Our library in this case is the `processor` library, `processor.h` and `processor.cpp`. Our executable, `processor_node.cpp`, is the actual ROS node that's running. In this package, we're splitting a trivial amount of code across three files just to show you the typical layout.

The 3 source files have comments describing what's going on.

catkin_create_pkg will autogenerate a CMakeLists.txt for you, but it can still be confusing. To distinguish our comments from the autogenerated documentation, our comments are preceded with four #'s: `####`

## Running

Bring up the Turtlebot by opening two windows.

In both windows, SSH into the turtlebot:<br />
```ssh turtlebot@softshell```

In one window, run:<br />
```roslaunch turtlebot_bringup minimal.launch```

In the other, run:<br />
```roslaunch turtlebot_bringup 3dsensor.launch```

Build our node:
```
cd ~/catkin_ws
catkin_make processor_node
```

On the lab computers, point the ROS_MASTER_URI to your Turtlebot:<br />
`setrobot softshell`

And run our node:<br />
`rosrun pcl_sample processor_node pointcloud2_in:=/camera/depth_registered/points`
